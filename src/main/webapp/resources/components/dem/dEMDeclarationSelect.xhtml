<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:composite="http://java.sun.com/jsf/composite"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui">
    <composite:interface componentType="org.guce.web.process.dem.jsf.components.DEMDeclarationComponent">
        <f:loadBundle basename="org/guce/web/process/dem/util/Bundle" var="demBundle"/>
        <composite:attribute name="value" required="true"/>
        <composite:attribute default="false" name="required" required="false"/>
        <composite:attribute name="requiredMessage" required="false"/>
        <composite:attribute default="false" name="readOnly" required="false"/>
        <composite:attribute default="dialogFormIssue" name="appendTo"
            required="false" type="java.lang.String"/>
        <composite:attribute name="styleClass" required="false" type="java.lang.String"/>
        <composite:attribute name="label" required="false" type="java.lang.String"/>
        <composite:attribute name="updateList" type="java.lang.String"/>
        <composite:attribute name="domain" type="java.lang.String"/>
        <composite:attribute default="#{null}" name="options" type="java.util.List"/>
        <composite:attribute name="changeValueListener" required="false"/>
    </composite:interface>
    <composite:implementation>
        <f:loadBundle basename="org/guce/web/process/dem/util/Bundle" var="demBundle"/>
        <h:panelGroup>
            <p:inputText converter="dEMDeclarationConverter"
                id="DEMDeclaration_ID" maxlength="5"
                readonly="#{cc.attrs.readOnly}"
                required="#{cc.attrs.required}"
                requiredMessage="#{demBundle.DEMDeclarationLabel} #{demBundle.required}"
                size="4" value="#{cc.attrs.value}">
                <p:ajax
                    disabled="#{cc.attrs.changeValueListener != null}"
                    event="change" process="@this" update="@this DEMDeclaration DEMDeclarationMessage #{cc.attrs.updateList}"/>
                <p:ajax
                    disabled="#{cc.attrs.changeValueListener == null}"
                    event="change"
                    listener="#{cc.attrs.changeValueListener()}"
                    process="@this" update="@this DEMDeclaration DEMDeclarationMessage #{cc.attrs.updateList}"/>
            </p:inputText>
            <p:spacer width="10px"/>
            <p:inputText id="DEMDeclaration" maxlength="35"
                readonly="true" size="25" title="#{cc.attrs.value.name}" value="#{cc.attrs.value.name}"/>
            <p:commandLink
                oncomplete="PF('customDialog_#{cc.id}').show()"
                process="@this" rendered="#{!cc.attrs.readOnly}">
                <p:graphicImage height="20"
                    value="/ImageFolder/loupeplus.jpeg" width="20"/>
            </p:commandLink>
            <p:message for="DEMDeclaration_ID" id="DEMDeclarationMessage"/>
            <p:dialog appendTo="#{cc.attrs.appendTo}" dynamic="true"
                id="customDialog_#{cc.id}" modal="true" widgetVar="customDialog_#{cc.id}">
                <p:dataTable id="customsTableList" lazy="true"
                    paginator="true" rowKey="#{cus.id}" rows="5"
                    rowsPerPageTemplate="5,10,15,20"
                    value="#{cc.attrs.options != null ? cc.attrs.options : cc.options}" var="cus">
                    <f:facet name="header">
                        #{demBundle.DEMDeclarationList}
                    </f:facet>
                    <f:facet name="footer">
                        #{demBundle.DEMDeclarationList}
                    </f:facet>
                    <p:column filterBy="#{cus.id}"
                        headerText="#{demBundle.ID}" width="100">
                        #{cus.id}
                    </p:column>
                    <p:column filterBy="#{cus.name}"
                        filterMatchMode="contains" filterMaxLength="200"
                        filterStyle="width:80%;" headerText="#{demBundle.Name}">
                        #{cus.name}
                    </p:column>
                    <p:column headerText="#{dem.declaration}" sortBy="#{cus.declaration}">
    #{cus.declaration}
</p:column>
                    <p:column width="30">
                        <p:commandLink
                            oncomplete="PF('customDialog_#{cc.id}').hide()"
                            process="@this"
                            rendered="#{cc.attrs.changeValueListener == null}"
                            title="select" update=":#{cc.clientId}:DEMDeclaration,:#{cc.clientId}:DEMDeclaration_ID,#{cc.attrs.updateList}">
                            <f:setPropertyActionListener
                                target="#{cc.attrs.value}" value="#{cus}"/>
                            <p:graphicImage height="15"
                                value="/ImageFolder/validated.jpg" width="15"/>
                        </p:commandLink>
                        <p:commandLink
                            action="#{cc.changeValueListener()}"
                            oncomplete="PF('customDialog_#{cc.id}').hide()"
                            process="@this"
                            rendered="#{cc.attrs.changeValueListener != null}"
                            title="select" update=":#{cc.clientId}:DEMDeclaration,:#{cc.clientId}:DEMDeclaration_ID,#{cc.attrs.updateList}">
                            <f:setPropertyActionListener
                                target="#{cc.attrs.value}" value="#{cus}"/>
                            <p:graphicImage height="15"
                                value="/ImageFolder/validated.jpg" width="15"/>
                        </p:commandLink>
                    </p:column>
                </p:dataTable>
            </p:dialog>
        </h:panelGroup>
    </composite:implementation>
</html>
