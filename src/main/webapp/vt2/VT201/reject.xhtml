<ui:composition 
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui" 
xmlns:="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets">
     <f:loadBundle var="vt2" basename="org/guce/web/process/vt2/util/Bundle" />
	   <h:form id="formContenu"  prependId="true">        
		
		<p style="text-align: right;padding:0px;margin:10px 0px;">
			<p:commandButton icon="ui-icon-cancel" value="#{vt2.Retour}" process="@this"
							 action="#{vt2ControllerList.goToPreviows()}" ajax="false" >
			</p:commandButton>
		</p>
		<p:fieldset legend="#{vt2.Fitres}" collapsed="true" toggleable="true" toggleSpeed="250">
		<h:panelGrid columns="3" style="width:95%;margin:auto;" cellspacing="5">
		<h:panelGrid columns="2" cellspacing="5">
				<h:outputLabel value="#{principal.NumeroDossier}"/>
				<p:inputText style="width: 100px" value="#{vt2ControllerList.filter.recordId}"/>
				<h:outputLabel value="#{principal.Etat}"/>
				<p:selectOneMenu value="#{vt2ControllerList.filter.fileState}">
					<f:selectItem itemLabel="#{principal.All}" itemValue="#{null}"/>
					<f:selectItem itemLabel="#{principal.Clos}" itemValue="clos"/>
					<f:selectItem itemLabel="#{principal.Open}" itemValue="IN_PROCESS"/>
					<f:selectItem itemLabel="#{principal.Error}" itemValue="error"/>
				</p:selectOneMenu>
		   </h:panelGrid>
			<p:fieldset legend="#{principal.DateEnvoi}">
				<h:panelGrid columns="4">
					<h:outputLabel value="#{principal.Start} :"/>
					<p:calendar size="10" pattern="dd/MM/yyyy" style="width: 120px" 
								value="#{vt2ControllerList.filter.dateEnvoiStart}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</p:calendar>
					<h:outputLabel value="#{principal.End} :"/>
					<p:calendar size="10"  pattern="dd/MM/yyyy" style="width: 120px" 
								value="#{vt2ControllerList.filter.dateEnvoiEnd}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</p:calendar>
				</h:panelGrid>
			</p:fieldset>
		<h:panelGrid columns="1">
			<p:commandButton style="" value="#{principal.Search}" action="#{vt2ControllerList.search()}" ajax="true" update="@form"/>
			<p:commandButton style="" value="#{principal.EffacerTous}" action="#{vt2ControllerList.resetsearch()}" ajax="true" update="@form"/>
		</h:panelGrid>
		</h:panelGrid>
		</p:fieldset>
		<br />
		<p:dataTable  rows="10" paginator="true" lazy="true" 
					  value="#{vt2ControllerList.models}"
					  var="file" paginatorAlwaysVisible="true"
					  sortBy="#{file.processing.procstartdate}"
					  sortOrder="descending"
					  rowStyleClass="#{file.processing.procState eq 'traiter' ? 'see' : 'nossee'}">
			<f:facet name="header">
			#{vt2.RejectList} (#{vt2ControllerList.models.rowCount})
			</f:facet>
			
			<ui:include    src="../fragments/list.xhtml" />
			
			<p:column>
				<p:commandLink title="#{vt2.View}" action="#{userControllerSite.goToNewPageForm()}" ajax="false" >
					<f:param name="page" value="view" />
					<f:param name="recordId" value="#{file.file.recordId}"/>
					<f:param name="processingid" value="#{file.processing.processingid}"/>
					<f:param name="type" value="viewreject" />
					<f:param name="formCode" value="VT201" />
				    <p:graphicImage value="/ImageFolder/choose.jpeg" width="25" height="25" />
               </p:commandLink>
			</p:column>
			<f:facet name="footer">
				#{vt2.RejectList}
			</f:facet>
		</p:dataTable>
    </h:form>
	
	<style>
		#formContenu .nossee{
			background: red;
		}
	</style>
</ui:composition>
