<ui:composition xmlns:="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:vt2="http://java.sun.com/jsf/composite/components/vt2">
    <f:loadBundle basename="org/guce/web/process/vt2/util/Bundle" var="vt2"/>
    <ui:param name="listTilte" value="#{(vT2ListController.page eq 'sent') ? vt2.sendRequest : vt2.registeredRequest}"/>
    <h:form id="formContenu">
        <h:panelGrid cellspacing="8" columns="6">
            <p:commandButton
                action="#{userControllerSite.goToNewPageForm()}"
                ajax="false" icon="ui-icon-document" id="newRequest" value="#{vt2.Init}">
                <f:param name="formCode" value="VT201"/>
                <f:param name="page" value="form"/>
                <f:param name="type" value="form"/>
            </p:commandButton>
            <p:commandButton
                action="#{userControllerSite.goToNewPageForm()}"
                ajax="false" icon="ui-icon-document" id="sentRequest"
                rendered="#{!(vT2ListController.page eq 'sent')}" value="#{vt2.sentRequest}">
                <f:param name="formCode" value="VT201"/>
                <f:param name="page" value="sent"/>
            </p:commandButton>
            <p:commandButton
                action="#{userControllerSite.goToNewPageForm()}"
                ajax="false" icon="ui-icon-document" id="sentRequest2"
                rendered="#{(vT2ListController.page eq 'sent')}" value="#{vt2.SaveFiles}">
                <f:param name="formCode" value="VT201"/>
                <f:param name="page" value="VT201"/>
            </p:commandButton>
            <p:commandButton
                action="#{vT2ListController.goToPreviows()}"
                ajax="false" icon="ui-icon-cancel" immediate="true" value="#{vt2.Back}"/>
        </h:panelGrid>
        <p:messages autoUpdate="true"/>
        <vt2:filter cleanAction="#{vT2ListController.resetsearch()}"
            renderedList="procEndDate,procStartDate"
            searchAction="#{vT2ListController.search()}"
            update=":formContenu:table" value="#{vT2ListController.filter}"/>
        <br/>
        <p:dataTable emptyMessage="#{vt2.NoFile}" id="table" lazy="true"
            paginator="true" rows="10" sortOrder="descending"
            value="#{vT2ListController.models}" var="file">
            <ui:include src="../part/list.xhtml"/>
            <p:column style="width: 10%">
                <p:commandLink
                    action="#{userControllerSite.goToNewPageForm()}"
                    ajax="false"
                    rendered="#{file.processing.procstartdate == null}" title="#{vt2.edit}">
                    <f:param name="page" value="form"/>
                    <f:param name="recordId" value="#{file.file.recordId}"/>
                    <f:param name="type" value="form"/>
                    <f:param name="formCode" value="VT201"/>
                    <p:graphicImage height="20"
                        value="/ImageFolder/choose.jpeg" width="20"/>
                </p:commandLink>
                <p:commandLink
                    action="#{userControllerSite.goToNewPageForm()}"
                    ajax="false"
                    rendered="#{file.processing.procstartdate != null}" title="#{vt2.view}">
                    <f:param name="page" value="view"/>
                    <f:param name="recordId" value="#{file.file.recordId}"/>
                    <f:param name="type" value="view"/>
                    <f:param name="formCode" value="VT201"/>
                    <p:graphicImage height="20"
                        value="/ImageFolder/detail.jpeg" width="20"/>
                </p:commandLink>
                <p:commandLink
                    action="#{userControllerSite.goToNewPageForm()}"
                    ajax="false" rendered="false" title="#{vt2.Copy}">
                    <f:param name="recordId" value="#{file.file.recordId}"/>
                    <f:param name="formCode" value="VT201"/>
                    <f:param name="page" value="form"/>
                    <f:param name="type" value="copy"/>
                    <p:graphicImage height="20"
                        value="/ImageFolder/execute.jpeg" width="20"/>
                </p:commandLink>
                <p:commandLink
                    action="#{userControllerSite.goToNewPageForm()}"
                    ajax="false" title="#{vt2.History}">
                    <f:param name="page" value="historic"/>
                    <f:param name="recordId" value="#{file.file.recordId}"/>
                    <f:param name="formCode" value="core"/>
                    <p:graphicImage alt="#{vt2.History}" height="20"
                        value="/ImageFolder/archive.jpeg" width="20"/>
                </p:commandLink>
            </p:column>
        </p:dataTable>
    </h:form>
    <style>
        #formContenu .nossee{
            background: greenyellow;
        }
    </style>
</ui:composition>
